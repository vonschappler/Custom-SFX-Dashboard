<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./css/main.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.8/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.8/dist/semantic.min.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/v/se/jszip-2.5.0/dt-1.10.25/af-2.3.7/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/cr-1.5.4/date-1.1.0/fc-3.3.3/fh-3.1.9/kt-2.6.2/r-2.2.9/rg-1.1.3/rr-1.2.8/sc-2.0.4/sb-1.1.0/sp-1.3.0/sl-1.3.3/datatables.min.css" />
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript"
        src="https://cdn.datatables.net/v/se/jszip-2.5.0/dt-1.10.25/af-2.3.7/b-1.7.1/b-colvis-1.7.1/b-html5-1.7.1/b-print-1.7.1/cr-1.5.4/date-1.1.0/fc-3.3.3/fh-3.1.9/kt-2.6.2/r-2.2.9/rg-1.1.3/rr-1.2.8/sc-2.0.4/sb-1.1.0/sp-1.3.0/sl-1.3.3/datatables.min.js"></script>
    <title>[Custom SFX v2.0.0] - Dashboard</title>
</head>

<body style="overflow: hidden; background-color: #1b1c1d;">
    <div id="topMenu" class="ui top fixed inverted small menu drag">
        <div class="ui thirteen column wide drag item borderless tiny header">
                <img class="ui mini image" src="./img/assets/dashboard.ico"></img> [Custom SFX v2.0.0] - Dashboard
        </div>
        <a id="help-menu" class="ui icon borderless dropdown right floated item nodrag" onclick="" tabindex="-1"><i class="circle question icon"></i></a>
        <a id="min-menu" class="item borderless nodrag" onclick="minimizeWindow()"><i class="small window minimize outline icon"></i></a>
        <a id="max-menu" class="item borderless nodrag" onclick="maxmizeWindow()"><i id="max-icon"
                class="small window maximize outline icon"></i></a>
        <a id="close-menu" class="item borderless nodrag" onclick="closeAllWindows()"><i class="small window close outline icon"></i></a>
    </div>
    <div id="tool-bar" class="ui tiny four item inverted top fixed pointing menu borderless">
        <a class="item" onclick="loadPage('scriptSettings')"><i class="cog icon"></i> Script Settings</a>
        <a class="item" onclick="loadPage('addSFX')"><i class="plus icon"></i> Add Custom Sound Effect</a>
        <a class="item" onclick="loadPage('sfxList')"><i class="stream icon"></i>Sound Effects Manager</a>
        <a class="item" onclick="loadPage('about')"><i class="info circle icon"></i>About</a>
    </div>
    
    <div id="content-holder" class="ui pushable">
        <div id="content" class="ui pusher"></div>
    </div>
    <!-- <div id="tooltip" class="ui bottom fixed inverted tiny menu">
        <div id="selectedMenu"class="header item"></div>
        <div id="helpSelected"class="item borderless"></div>
    </div> -->
    <div id = "modal" class="ui modal"></div>
    <div id="tooltip" class="ui bottom fixed inverted tiny menu">
        <div id="selectedMenu" class="header item"></div>
        <div id="helpSelected" class="item borderless"></div>
        <div id="version" class="right floated item">Dashboard version: vX.Y.z</div>
    </div>
    <script src='../src/scripts/helpMenu.js'></script>
    <script src="../src/scripts/base.js"></script>
    <script>
        const { ipcRenderer } = require('electron');
            const version = document.getElementById('version');

            ipcRenderer.send('app_version');
            ipcRenderer.on('app_version', (event, arg) => {
                ipcRenderer.removeAllListeners('app_version');
                version.innerText = 'Dasboard Version: ' + arg.version;
            });
            ipcRenderer.on('update_available', () => {
                $('body')
                    .toast({
                        message: 'A new version of this Dashboard is availlabe. Do you want to download and install it now?',
                        displayTime: 0,
                        class: 'black',
                        actions: [{
                            text: 'Yes',
                            icon: 'check',
                            class: 'teal',
                            click: function () {
                                ipcRenderer.on('update_available', () => {
                                    ipcRenderer.removeAllListeners('update_available');
                                    message.innerText = 'A new update is available. Downloading now...';
                                    notification.classList.remove('hidden');
                                });
                            }
                        }, {
                            icon: 'close',
                            text: "Later",
                            class: 'red',
                            click: function () {
                                ipcRenderer.removeAllListeners('update_available');
                                $(this).toast('hide')
                            }
                        }]
                    })
                    ;
            })
        
        startApplication()
        helpMenu()
        showModal('gettingStarted_modal', 'scriptSettings')
    </script>
</body>

</html>